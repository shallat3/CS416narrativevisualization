<HTML>

  <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">

      <style>
        body {
          font-family: 'Arial', sans-serif;

          background-color: white;
          margin-top: 2.5%;
          margin-bottom: 5%;
          margin-left: 5%;
          margin-right: 5%;
          text-align: center;
        }

        svg {
          background-color:lightgray;
          opacity:0.3;
          height:400px;
          width:600px;
          border-radius: 20px;
        }

        .left {
          width: 25%;
        }
        .right {
          width: 75%;
        }


        .column {
          float: left
        }

        .row:after {
          content: "";
          display: table;
          clear: both;
        }

        
        
      </style>
    
  </head>
  <body>

    <div class=row>
      <div class="column left">
        <h1>Schools in New York</h1>
          <p style="color:darkslategray;" >Every year, students in New York City 
            participate in a lottery in an attempt to further their education in the best educational institutions. This process 
            seems very make-or-break, but how much does it actually matter? Here, we explore the relationships between Math and ELA scores and 
            attendance in New York City's public schools.</p>
      </div>
      <div class="column right">
        <div id="marginbox" style="margin-left:10%; margin-right:10%; margin-bottom:5%; margin-top:5%;">
          <div id="selectorbar" style="width:80%; float:center;">
            <button id="backbutton" style="float:left;">back</button>
            <button id="button1">1</button>
            <button id="button2">2</button>
            <button id="button3">3</button>
            <button id="nextbutton" style="float:right;">next</button>
          </div>
          <svg id="visualization"></svg>
          <p id="aftervis"></p>
        </div>
        
      </div>
    </div>
    
    
    <script src="https://d3js.org/d3.v6.min.js"></script>

    <script>

    const margin = { top: 20, right: 30, bottom: 40, left: 50 };
    const width = 600 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;
      d3.csv("data/NYschools.csv").then(data => {
        console.log(data)

      // Step 2: Load the data using D3.js
    
      // Step 3: Define scales for mapping data values to the visualization space
      const xScale = d3.scaleLinear().domain([0.8,1]).range([0, width]);
      const yScale = d3.scaleLinear().domain([1.5, 4]).range([height, 0]);

      // Step 4: Create the SVG element for the scatterplot
      const svg = d3
        .select("#visualization")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", `translate(${margin.left},${margin.top})`);

      // Step 5: Bind the data to the SVG elements and create circles for each data point
      const circles = svg
        .selectAll("circle")
        .data(data)
        .enter()
        .append("circle")
        
        .attr("cy", d => yScale(d.avg_math_ela))
        .attr("cx", d => xScale(d.Student_Attendance_Rate)) 
        .attr("r", 5) // Set the radius of the circles
        .attr("fill", "blue"); // Set the fill color of the circles

      // Step 6: Apply the appropriate styling to the circles
      // (You can add more styles like axis, labels, tooltips, etc., as per your requirement)

      // X-axis
      svg
        .append("g")
        .attr("transform", `translate(0,${height})`)
        .call(d3.axisBottom(xScale));

      // Y-axis
      svg.append("g").call(d3.axisLeft(yScale));

      // Axes labels (optional)
      svg
        .append("text")
        .attr("x", width / 2)
        .attr("y", height + margin.bottom - 5)
        .style("text-anchor", "middle")
        .text("Attendance Rating");

      svg
        .append("text")
        .attr("x", -height / 2)
        .attr("y", -margin.left + 15)
        .style("text-anchor", "middle")
        .attr("transform", "rotate(-90)")
        .text("Average Math and ELA score");
    });


    // functions for when the different slides are accessed
      document.getElementById("button1").onclick = 
        function() {document.getElementById("aftervis").innerHTML = "<p style= 'color:green;'>page 1</p>"};

      document.getElementById("button2").onclick = 
        function() {document.getElementById("aftervis").innerHTML = "<p style= 'color:red;'>page 2</p>"};

      document.getElementById("button3").onclick = 
        function() {document.getElementById("aftervis").innerHTML = "<p style= 'color:blue;'>page 3</p>"};
      
    </script>
    
  </body>
</HTML>
